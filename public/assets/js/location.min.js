async function initMap(){var a,b;await getPosition().then(c=>{a={lat:c.coords.latitude,lng:c.coords.longitude},b=10,window.latInput=c.coords.latitude,window.lngInput=c.coords.longitude}).catch(c=>{console.error(c.message),a={lat:-25.363,lng:131.044},b=4});var c=new google.maps.Map(document.getElementById("map"),{zoom:b,center:a}),d=new google.maps.InfoWindow({content:"<button type=\"submit\" class=\"setLocal button is-primary\">Set Location</button>"}),e=new google.maps.Marker({position:a,map:c,draggable:!0,title:"Donation location"});e.addListener("click",function(){f.close(),d.open(c,e)});var f=new google.maps.InfoWindow({content:"<p>Click and drag the marker to set the location.</p>"});f.open(c,e),google.maps.event.addListener(e,"dragend",function(a){window.latInput=a.latLng.lat(),window.lngInput=a.latLng.lng()})}function getPosition(){return new Promise((a,b)=>{navigator.geolocation.getCurrentPosition(a,b)})}$(document).on("click",".setLocal",function(a){a.preventDefault();var b={lat:latInput,lng:lngInput};console.log(b),createLocation(b.lat,b.lng)});function createLocation(a,b){$.ajax({url:"/api/charity",type:"PUT",data:{lat:a,lng:b}}).then(function(){console.log("success"),window.location.replace("/user")}).catch(function(a){console.log(a)})}