$(document).ready(function(){function a(a,b,c){$.post("/api/login",{email:a,password:b,charityKey:c}).then(function(){window.location.replace("/user")}).catch(function(a){console.log(a)})}var b=$("form.login"),c=$("input#email-input"),d=$("input#password-input"),e=$("input#charityKey-input");b.on("submit",function(b){b.preventDefault(),$.get("/api/user").then(function(b){var f=e.val(),g=b.find(a=>a.email==c.val());if(!g)return c.val(""),d.val(""),e.val(""),void $("#errorMsg").text("Username does not exist!");if(!(0<f.length))h={email:c.val().trim(),password:d.val().trim()};else if(f==g.charityKey&&c.val()==g.email)var h={email:c.val().trim(),password:d.val().trim(),charityKey:f};else return c.val(""),d.val(""),e.val(""),void $("#errorMsg").text("Invalid credentials! Try again!");h.email&&h.password&&a(h.email,h.password,h.charityKey)})})});